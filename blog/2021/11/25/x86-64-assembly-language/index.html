
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>x86-64 Assembly Language  | Zeus@HackOlympus:~$</title>

	<meta name="author" content="Zeus"> 
	
	<meta name="description" content="Prerequisite: Knowledge about simple programming language terms like variables, functions etc. Registers ASM works a lot around registers, I try to &hellip;"> <meta name="keywords" content="">
    
    <meta name="keywords" content="" />

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Zeus@HackOlympus:~$" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/font-awesome.min.css" rel="stylesheet" type="text/css">
	
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MFNXHS9HDQ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-MFNXHS9HDQ');
</script>

</head>



<body>
	<header id="header" class="inner"><a href="/"><h1>Zeus@HackOlympus:~$</h1></a>
<nav id="main-nav"><ul>
	<li><a href="/">Blog</a></li>
	<li><a href="/archives">Archive</a></li>
	<li><a href="/contact">Contact</a></li>
</ul>
</nav>


</header>

	<div id="content" class="inner"><article class="post">
	<h2 class="title">X86-64 Assembly Language</h2>
	<div class="entry-content"><h4>Prerequisite: Knowledge about simple programming language terms like variables, functions etc.</h4>

<h3>Registers</h3>

<p>ASM works a lot around registers, I try to think of them as variables which only store data types up to 8 bytes.Now there are special registers and register for general use.</p>

<p>In the start (during 8 bit days) we only had 4 general purpose registers - a,b,c,d.</p>

<p>And Other 2 special purpose registers - sp (stack pointer) and bp (base pointer).</p>

<p>But now (in 64 bit mode) we have a total of 11 general purpose registers and 4 special purpose registers:</p>

<table>
<thead>
<tr>
<th style="text-align:center;"> Register </th>
<th style="text-align:center;">          Purpose         </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">    rax   </td>
<td style="text-align:center;"> General Purpose Register </td>
</tr>
<tr>
<td style="text-align:center;">    rbx   </td>
<td style="text-align:center;"> General Purpose Register </td>
</tr>
<tr>
<td style="text-align:center;">    rcx   </td>
<td style="text-align:center;"> General Purpose Register </td>
</tr>
<tr>
<td style="text-align:center;">    rdx   </td>
<td style="text-align:center;"> General Purpose Register </td>
</tr>
<tr>
<td style="text-align:center;">    r8    </td>
<td style="text-align:center;"> General Purpose Register </td>
</tr>
<tr>
<td style="text-align:center;">    r9    </td>
<td style="text-align:center;"> General Purpose Register </td>
</tr>
<tr>
<td style="text-align:center;">    r10   </td>
<td style="text-align:center;"> General Purpose Register </td>
</tr>
<tr>
<td style="text-align:center;">    r11   </td>
<td style="text-align:center;"> General Purpose Register </td>
</tr>
<tr>
<td style="text-align:center;">    r12   </td>
<td style="text-align:center;"> General Purpose Register </td>
</tr>
<tr>
<td style="text-align:center;">    r13   </td>
<td style="text-align:center;"> General Purpose Register </td>
</tr>
<tr>
<td style="text-align:center;">    r14   </td>
<td style="text-align:center;"> General Purpose Register </td>
</tr>
<tr>
<td style="text-align:center;">    r15   </td>
<td style="text-align:center;"> General Purpose Register </td>
</tr>
<tr>
<td style="text-align:center;">    rsp   </td>
<td style="text-align:center;"> Special Purpose Register </td>
</tr>
<tr>
<td style="text-align:center;">    rbp   </td>
<td style="text-align:center;"> Special Purpose Register </td>
</tr>
<tr>
<td style="text-align:center;">    rsi   </td>
<td style="text-align:center;"> Special Purpose Register </td>
</tr>
<tr>
<td style="text-align:center;">    rdi   </td>
<td style="text-align:center;"> Special Purpose Register </td>
</tr>
</tbody>
</table>


<p>In above registers &lsquo;r&rsquo; means 64 bit register. If we want to use 32 bit register we use &lsquo;e&rsquo; prefix. <strong>We can also use 32/16/8 bit registers in 64 bit mode</strong> . The following illustration will explain it clearly :</p>

<p><img src="/images/x86-64/Registers.drawio.png" class="center" style="width: 70%"></p>

<h3>Syscall</h3>

<p>Behind the working of every program, there are syscalls involved; These syscalls are permissions which the program ask for from the &ldquo;supreme authority&rdquo; - the kernel. Now why this happens ? Because the program does not directly run in the privileged mode for security reasons.</p>

<p>In C language we have glibc that provide us functions like <code>printf</code>, <code>scanf</code> etc. which performs syscalls for us in the background.Now before making a syscall we have to set some parameters to define the syscall and its behaviour. We define the syscall using &ldquo;codes&rdquo;, for example <code>write</code> syscall has code 1 in x86-64. Now <code>write</code> takes 3 arguments: <code>fd</code>(file descriptor we have to write), <code>buf</code> (stuff we have to write), and <code>count</code> (How many characters to write). How do we know this ? using <code>man 3 write</code> which return the man page of write.</p>

<p>We set these arguments using different register and all this follows a calling convention. The calling convention is as follows:</p>

<p><img src="/images/x86-64/Calling_convention.png" class="center" style="width: 60%"></p>

<p>To get a list of all the syscalls : <code>cat /usr/include/x86_64-linux-gnu/asm/unistd_64.h</code> We don&rsquo;t need to remember this path. I mean if you ever forget this path simply investigate this using other techniques like preprocessor output and printing predefined standard macros like this: <code>echo SYS_write | gcc -include sys/syscall.h -E -</code> here we are just asking the compiler to return the preprocessor output to stdout.</p>

<p>That&rsquo;s all folks. In next article we&rsquo;ll write our first assembly program.</p>
</div>


<div class="meta">
	<div class="date">








  



<time datetime="2021-11-25T10:07:42+05:30" pubdate data-updated="true">Nov 25th, 2021</time></div>
	

<div class="tags">

	<a class='category' href='//blog/categories/asm/'>asm</a>

</div>


</div>
</article>
</div>
	<footer id="footer" class="inner">Copyright &copy; 2022
 Zeus 
<br>

</footer>
	

</body>
</html>
